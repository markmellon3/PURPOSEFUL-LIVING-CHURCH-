<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF‑8">
  <meta name="viewport" content="width=device‑width, initial‑scale=1.0">
  <title>Live Events | Purposeful Living Church</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4; }
    header { background:#333; color:#fff; padding:15px 0; text-align:center; }
    nav { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; background:#444; padding:10px; }
    nav a { color:#fff; text-decoration:none; padding:8px 15px; border-radius:5px; transition:0.2s; }
    nav a:hover { background:#555; }
    .container { max-width:1000px; margin:auto; padding:20px; }

    h2 { margin-top:40px; margin-bottom:20px; text-align:center; }

    /* Live video */
    .live-video iframe { width:100%; height:500px; border:none; border-radius:10px; }

    /* Event lists */
    .event-list { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); gap:20px; }
    .event-card { background:#fff; border-radius:10px; padding:15px; box-shadow:0 5px 20px rgba(0,0,0,0.1); }
    .event-card h3 { margin-top:0; }
    .event-card p { margin:5px 0; }

    /* Past videos */
    .past-videos { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); gap:20px; margin-bottom:50px; }
    .past-video iframe { width:100%; height:200px; border:none; border-radius:10px; }

    @media(max-width:600px){ .live-video iframe { height:300px; } }
  </style>
</head>
<body>

  <header>
    <h1>Purposeful Living Church – Live Events</h1>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="kids.html">Kids Ministry</a>
    <a href="youth.html">Youth Ministry</a>
    <a href="outreach.html">Outreach Ministry</a>
    <a href="live.html">Live Events</a>        
  </nav>

  <div class="container">

    <h2>Currently Live</h2>
    <div class="live-video" id="liveVideoContainer">
      <!-- YouTube embed will be inserted here via JS -->
      <p>Loading live stream…</p>
    </div>

    <h2>Upcoming Events</h2>
    <div class="event-list">
      <div class="event-card">
        <h3>Sunday Worship</h3>
        <p><strong>Date:</strong> November 20, 2025</p>
        <p><strong>Time:</strong> 9:00 AM - 11:00 AM</p>
        <p><strong>Location:</strong> Main Church Hall</p>
      </div>
      <div class="event-card">
        <h3>Youth Fellowship</h3>
        <p><strong>Date:</strong> November 23, 2025</p>
        <p><strong>Time:</strong> 5:00 PM - 7:00 PM</p>
        <p><strong>Location:</strong> Youth Center</p>
      </div>
      <div class="event-card">
        <h3>Outreach Service</h3>
        <p><strong>Date:</strong> November 28, 2025</p>
        <p><strong>Time:</strong> 10:00 AM - 1:00 PM</p>
        <p><strong>Location:</strong> Community Hall</p>
      </div>
    </div>

    <h2>Past Events</h2>
    <div class="past-videos" id="pastVideosContainer">
      <!-- YouTube video embeds will be inserted here via JS -->
      <p>Loading past videos…</p>
    </div>

  </div>

  <script>
    // === CONFIGURATION ===
    const YOUTUBE_API_KEY = 'AIzaSyBOInvlwlFHZSLqJHU4i3B5AAyvM-EgBII ';  // <--- Replace
    const CHANNEL_ID = 'UCGvKHZTpzghYG9x6fxUn5jQ';    // <--- Replace (starts with “UC…”)
    const MAX_PAST_VIDEOS = 6;

    // === UTILS ===
    async function fetchJSON(url) {
      const resp = await fetch(url);
      if (!resp.ok) throw new Error('Network response not ok');
      return await resp.json();
    }

    // === LIVE CHECK ===
    async function checkLiveStream() {
      try {
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&eventType=live&type=video&key=${YOUTUBE_API_KEY}`;
        const data = await fetchJSON(url);
        if (data.items && data.items.length > 0) {
          // Use the first live video
          const liveVideoId = data.items[0].id.videoId;
          document.getElementById('liveVideoContainer').innerHTML =
            `<iframe src="https://www.youtube.com/embed/${liveVideoId}?autoplay=1" allowfullscreen></iframe>`;
        } else {
          // No live event → fallback to latest upload
          showLatestUpload();
        }
      } catch (err) {
        console.error(err);
        showLatestUpload();
      }
    }

    async function showLatestUpload() {
      try {
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&maxResults=1&order=date&type=video&key=${YOUTUBE_API_KEY}`;
        const data = await fetchJSON(url);
        const vid = data.items[0].id.videoId;
        document.getElementById('liveVideoContainer').innerHTML =
          `<iframe src="https://www.youtube.com/embed/${vid}" allowfullscreen></iframe>`;
      } catch (err) {
        console.error(err);
        document.getElementById('liveVideoContainer').innerHTML =
          '<p>Unable to load video at this time.</p>';
      }
    }

    // === PAST VIDEOS LIST ===
    async function loadPastVideos() {
      try {
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&maxResults=${MAX_PAST_VIDEOS}&order=date&type=video&key=${YOUTUBE_API_KEY}`;
        const data = await fetchJSON(url);
        const container = document.getElementById('pastVideosContainer');
        container.innerHTML = '';
        data.items.forEach(item => {
          const vid = item.id.videoId;
          const title = item.snippet.title;
          const card = document.createElement('div');
          card.className = 'past-video';
          card.innerHTML = `
            <iframe src="https://www.youtube.com/embed/${vid}" allowfullscreen></iframe>
            <p>${title}</p>
          `;
          container.appendChild(card);
        });
      } catch (err) {
        console.error(err);
        document.getElementById('pastVideosContainer').innerHTML =
          '<p>Unable to load past videos at this time.</p>';
      }
    }

    // === INITIALIZE ===
    checkLiveStream();
    loadPastVideos();

  </script>
<!-- ================= FOOTER ================= -->
<footer id="contact" class="main-footer">
    <div class="footer-content">

        <!-- Church Info -->
        <div class="footer-section">
            <h4>Purposeful Living Church</h4>
            <p>
                Purposeful Living Church is a Bible-based, family-centered, non-denominational church with a mission of winning the lost to Christ and teaching the saved to live a purposeful life.
            </p>
        </div>


        <!-- Social Media -->
        <div class="footer-section">
            <h4>Connect With Us</h4>
            <div class="social-icons">
                <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
            </div>
        </div>

    </div>

    <!-- Copyright -->
    <div class="copyright">
        &copy; <span id="year"></span> Purposeful Living Church. All rights reserved.
    </div>
</footer>

<style>
/* ================= FOOTER (Gray Theme) ================= */
.main-footer {
    background: #e5e5e5;
    color: #333;
    padding: 40px 20px;
    font-family: Arial, sans-serif;
}

.footer-content {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    justify-content: space-between;
}

.footer-section {
    flex: 1;
    min-width: 250px;
}

.footer-section h4 {
    color: #222;
    margin-bottom: 12px;
}

.footer-section p, 
.footer-section ul li, 
.footer-section a {
    color: #333;
    font-size: 14px;
    line-height: 1.6;
}

.footer-section ul li {
    list-style: none;
    margin: 6px 0;
}

.footer-section a {
    text-decoration: none;
    transition: 0.3s;
}

.footer-section a:hover {
    color: #000;
}

.social-icons {
    margin-top: 10px;
}

.social-icons .social-link {
    font-size: 20px;
    margin-right: 15px;
    color: #333;
    transition: 0.3s;
}

.social-icons .social-link:hover {
    color: #000;
}

.copyright {
    text-align: center;
    margin-top: 25px;
    color: #444;
    border-top: 1px solid #bbb;
    padding-top: 15px;
    font-size: 14px;
}
</style>

<script>
// Automatically set current year
document.getElementById("year").textContent = new Date().getFullYear();
</script>
</body>
</html>
